# 方案總管實際範例

以下是 SQL Server Management Studio (SSMS) 中方案總管的實際使用範例，涵蓋了從建立專案到常見操作的完整流程。

## 建立新的 SQL Server 資料庫專案

### 步驟 1: 建立新專案
1. 打開 SSMS
2. 選擇「檔案」>「新增」>「專案」
3. 在「新增專案」對話方塊中：
   - 選擇「SQL Server」>「SQL Server 資料庫專案」
   - 命名為「CustomerDB_Development」
   - 選擇儲存位置，例如：「C:\Projects\SQL」
   - 點擊「確定」

### 步驟 2: 專案結構
新專案建立後，您會在方案總管中看到以下結構：
```
CustomerDB_Development (專案)
├── 連線
├── 查詢
└── 其他
```

## 新增資料庫物件

### 範例: 新增資料表指令碼

1. 在方案總管中，右鍵點擊專案「CustomerDB_Development」
2. 選擇「新增」>「資料表」
3. 輸入以下 SQL 指令碼：

```sql
CREATE TABLE [dbo].[Customers] (
    [CustomerID] INT IDENTITY(1,1) PRIMARY KEY,
    [CustomerName] NVARCHAR(100) NOT NULL,
    [ContactEmail] NVARCHAR(255) NULL,
    [Phone] VARCHAR(20) NULL,
    [CreatedDate] DATETIME DEFAULT GETDATE(),
    [ModifiedDate] DATETIME NULL
);
```

4. 將檔案儲存為「dbo.Customers.sql」

### 範例: 新增預存程序

1. 在方案總管中，右鍵點擊專案
2. 選擇「新增」>「預存程序」
3. 輸入以下 SQL 指令碼：

```sql
CREATE PROCEDURE [dbo].[sp_GetCustomerByID]
    @CustomerID INT
AS
BEGIN
    SET NOCOUNT ON;
    
    SELECT 
        CustomerID,
        CustomerName,
        ContactEmail,
        Phone,
        CreatedDate,
        ModifiedDate
    FROM 
        dbo.Customers
    WHERE 
        CustomerID = @CustomerID;
END
```

4. 將檔案儲存為「dbo.sp_GetCustomerByID.sql」

## 使用資料夾組織專案

### 範例: 建立邏輯資料夾結構

1. 在方案總管中，右鍵點擊專案「CustomerDB_Development」
2. 選擇「新增」>「新資料夾」
3. 命名為「Tables」
4. 重複步驟建立「StoredProcedures」、「Views」和「Functions」資料夾
5. 將先前建立的檔案拖放到對應的資料夾中

專案結構會變成：
```
CustomerDB_Development (專案)
├── Tables
│   └── dbo.Customers.sql
├── StoredProcedures
│   └── dbo.sp_GetCustomerByID.sql
├── Views
├── Functions
├── 屬性
├── 參考
└── 安全性
```

## 版本管理整合範例

### 範例: 與 Git 整合

1. 在方案總管中，右鍵點擊方案「Solution 'CustomerDB_Development'」
2. 選擇「新增方案至原始檔控制」
3. 選擇 Git 作為版本控制系統
4. 在方案總管中，檔案狀態將顯示為已簽出（顯示+圖示）

5. 修改檔案後，右鍵點擊已更改的檔案
6. 您可以選擇：
   - 「比較」以查看變更
   - 「認可」以提交變更
   - 「查看歷程記錄」以查看檔案修改歷史

## 資料庫比較和同步範例

### 範例: 結構比較

1. 在方案總管中，右鍵點擊專案
2. 選擇「結構比較」
3. 在比較工具中設定：
   - 來源：選擇您的專案
   - 目標：選擇現有資料庫連線
4. 點擊「比較」以查看差異
5. 選擇要更新的物件，然後點擊「更新目標」

## 發布專案範例

### 範例: 產生部署指令碼

1. 在方案總管中，右鍵點擊專案「CustomerDB_Development」
2. 選擇「發布」
3. 在發布對話方塊中：
   - 選擇目標資料庫連線
   - 設定發布選項（如：包含交易、產生指令碼等）
4. 點擊「發布」按鈕
5. SSMS 會產生部署指令碼並執行或儲存該指令碼

## 多專案方案範例

### 範例: 新增多個關聯專案

1. 在方案總管中，右鍵點擊方案「Solution 'CustomerDB_Development'」
2. 選擇「新增」>「新專案」
3. 創建名為「CustomerDB_Tests」的新專案
4. 在「CustomerDB_Tests」專案中新增單元測試檔案

結果結構：
```
Solution 'CustomerDB_Development'
├── CustomerDB_Development (專案)
│   ├── Tables
│   ├── StoredProcedures
│   └── ...
└── CustomerDB_Tests (專案)
    └── Tests
```

## 實用技巧

1. **快速查找**: 在方案總管上方的搜尋框輸入物件名稱
2. **反向工程**: 在專案上右鍵，選擇「匯入」>「資料庫」，從現有資料庫匯入結構
3. **指令碼範本**: 使用「檢視」>「範本總管」套用預定義的 SQL 範本
4. **拖放操作**: 在方案總管中拖放資料庫物件以重組結構

以上範例展示了方案總管在實際 SQL Server 開發中的強大功能，幫助開發人員有效組織和管理資料庫專案。